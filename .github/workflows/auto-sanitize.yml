name: Auto-Sanitize Secrets

on:
  push:
    branches: [ main, dev, staging ]
    paths:
      - '.configs/**/*.json'
      - 'mai-advisor-mcp/.configs/**/*.json'
  pull_request:
    branches: [ main ]
    paths:
      - '.configs/**/*.json'
      - 'mai-advisor-mcp/.configs/**/*.json'

permissions:
  contents: write
  pull-requests: write

jobs:
  sanitize:
    uses: ./.github/workflows/reusable-sanitize.yml
    with:
      target-paths: |
        .configs/**/*.json
        mai-advisor-mcp/.configs/**/*.json
