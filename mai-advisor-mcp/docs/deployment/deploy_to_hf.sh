#!/bin/bash

# MAI Advisor - HuggingFace Space Deployment Script
# Run this to prepare files for upload

set -e

echo ""
echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘                                                          â•‘"
echo "â•‘     MAI ADVISOR - HUGGINGFACE SPACE DEPLOYMENT          â•‘"
echo "â•‘                                                          â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# Check if we're in the right directory
if [ ! -f "app_workflow.py" ]; then
    echo "âŒ Error: app_workflow.py not found!"
    echo "   Please run this script from mai-advisor-mcp/mai-advisor-mcp/"
    exit 1
fi

echo "âœ… Found app_workflow.py"
echo ""

# Create deployment directory
DEPLOY_DIR="huggingface_space_deploy"
echo "ğŸ“ Creating deployment directory: $DEPLOY_DIR"
rm -rf "$DEPLOY_DIR"
mkdir -p "$DEPLOY_DIR"

# Copy essential files
echo ""
echo "ğŸ“‹ Copying files for HuggingFace Space..."
echo ""

echo "  âœ“ README.md (hackathon version)"
cp README.md "$DEPLOY_DIR/"

echo "  âœ“ app_workflow.py (main application)"
cp app_workflow.py "$DEPLOY_DIR/"

echo "  âœ“ requirements.txt"
cp requirements.txt "$DEPLOY_DIR/"

echo "  âœ“ LICENSE"
cp LICENSE "$DEPLOY_DIR/"

echo "  âœ“ src/ directory"
cp -r src "$DEPLOY_DIR/"

echo "  âœ“ .env.example (for documentation)"
cp .env.example "$DEPLOY_DIR/" 2>/dev/null || echo "  âš  .env.example not found (optional)"

echo ""
echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘                  DEPLOYMENT READY! âœ…                    â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "Files prepared in: $DEPLOY_DIR/"
echo ""
echo "ğŸ“¦ Files ready for upload:"
ls -lh "$DEPLOY_DIR"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "NEXT STEPS:"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "1ï¸âƒ£  Join HuggingFace Organization (if not done)"
echo "   â†’ https://huggingface.co/MCP-1st-Birthday"
echo "   â†’ Click 'Request to join this org'"
echo ""
echo "2ï¸âƒ£  Create New Space"
echo "   â†’ Go to: https://huggingface.co/new-space"
echo "   â†’ Owner: MCP-1st-Birthday"
echo "   â†’ Space name: mai-advisor-grant-planning"
echo "   â†’ License: MIT"
echo "   â†’ SDK: Gradio"
echo "   â†’ Visibility: Public âš ï¸  MUST BE PUBLIC!"
echo "   â†’ Hardware: CPU basic (free)"
echo ""
echo "   âš ï¸  DO NOT enable authentication!"
echo "   âš ï¸  DO NOT make it private!"
echo "   âš ï¸  Users provide their own API keys in the interface!"
echo ""
echo "3ï¸âƒ£  Upload Files (via Web UI or Git)"
echo "   â†’ Upload all files from: $DEPLOY_DIR/"
echo ""
echo "   Required files:"
echo "     â€¢ README.md (with hackathon tags!)"
echo "     â€¢ app_workflow.py"
echo "     â€¢ requirements.txt"
echo "     â€¢ src/ (entire directory)"
echo "     â€¢ LICENSE"
echo ""
echo "4ï¸âƒ£  Wait for Build & Test"
echo "   â†’ Build takes ~5-10 minutes"
echo "   â†’ Space will be PUBLIC - no login required"
echo "   â†’ Users provide their own OpenRouter API key"
echo "   â†’ Test complete workflow"
echo "   â†’ Verify all tabs work"
echo "   â†’ Check downloads"
echo ""
echo "5ï¸âƒ£  Update README with Links (AFTER deployment)"
echo "   â†’ Add your demo video link"
echo "   â†’ Add your social media post links"
echo "   â†’ Update Space URL references"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "ğŸ“ IMPORTANT REMINDERS:"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "âœ… README.md has correct tags:"
echo "   - mcp-in-action-track-enterprise"
echo "   - building-mcp-track-enterprise"
echo ""
echo "âš ï¸  SPACE MUST BE PUBLIC - NO AUTHENTICATION!"
echo "    Users provide their own OpenRouter API keys"
echo "    NO HuggingFace Secrets/Environment Variables needed!"
echo ""
echo "âš ï¸  DO NOT add OPENROUTER_API_KEY to Space Secrets!"
echo "    Users enter their own keys in the Gradio interface!"
echo ""
echo "âš ï¸  DO NOT upload .env file!"
echo "    The .env.example is for local development only!"
echo ""
echo "âš ï¸  AFTER Space is live, add these to README:"
echo "    - Demo video link (line 30)"
echo "    - Social post links (line 28)"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "ğŸ¬ NEXT: Record your demo video"
echo "   See HACKATHON_CHECKLIST.md for video script"
echo ""
echo "Ready to deploy! ğŸš€"
echo ""
